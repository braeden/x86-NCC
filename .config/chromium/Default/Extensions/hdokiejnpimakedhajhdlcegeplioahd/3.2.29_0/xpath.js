function LP_getElementByXPath(b,a){return!b&&(b=LP_derive_doc(),!b)?null:LP_lookupElementByXPath(b,a)}function LP_getElementsByXPath(b,a){return!b&&(b=LP_derive_doc(),!b)?null:LP_lookupElementsByXPath(b,a)}
function LP_createXPathFromElement(b,a){if(!b&&(b=LP_derive_doc(),!b)||!a)return null;var e=b.getElementsByTagName("*"),d,c;for(segs=[];a&&1==a.nodeType;a=a.parentNode)if(a.hasAttribute("id")){for(c=d=0;c<e.length&&!(e[c].hasAttribute("id")&&e[c].id==a.id&&d++,1<d);c++);if(1==d)return segs.unshift('id("'+a.getAttribute("id")+'")'),segs.join("/");d=a.parentNode?a.parentNode.children:[];for(var f=c=0;f<d.length&&!("undefined"!=typeof d[f].hasAttribute&&(d[f].hasAttribute("id")&&d[f].id==a.id)&&c++,
1<c);f++);if(1<c){d=1;for(c=a.previousSibling;c;c=c.previousSibling)c.localName==a.localName&&d++;segs.unshift(a.localName.toLowerCase()+"["+d+"]")}else segs.unshift(a.localName.toLowerCase()+'[@id="'+a.getAttribute("id")+'"]')}else if(a.hasAttribute("name"))segs.unshift(a.localName.toLowerCase()+'[@name="'+a.getAttribute("name")+'"]');else if(a.hasAttribute("action")&&"FORM"==a.tagName.toUpperCase())segs.unshift(a.localName.toLowerCase()+'[@action="'+a.getAttribute("action")+'"]');else if(a.hasAttribute("class"))segs.unshift(a.localName.toLowerCase()+
'[contains(@class,"'+a.getAttribute("class")+'")]');else{d=1;for(c=a.previousSibling;c;c=c.previousSibling)c.localName==a.localName&&d++;segs.unshift(a.localName.toLowerCase()+"["+d+"]")}return segs.length?"/"+segs.join("/"):null}
function LP_lookupElementByXPath(b,a){return!b||g_isfirefox&&b&&!b.defaultView||"undefined"==typeof(g_isfirefox?b.defaultView.XPathEvaluator:XPathEvaluator)?null:(g_isfirefox?new b.defaultView.XPathEvaluator:new XPathEvaluator).evaluate(a,b.documentElement,null,g_isfirefox?b.defaultView.XPathResult.FIRST_ORDERED_NODE_TYPE:XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}
function LP_lookupElementsByXPath(b,a){var e=[];if(!b||"undefined"==typeof(g_isfirefox?b.defaultView.XPathEvaluator:XPathEvaluator))return e;var d=(g_isfirefox?new b.defaultView.XPathEvaluator:new XPathEvaluator).evaluate(a,b.documentElement,null,g_isfirefox?b.defaultView.XPathResult.ORDERED_NODE_ITERATOR_TYPE:XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(d)for(var c=d.iterateNext();c;)c&&e.push(c),c=d.iterateNext();return e};
